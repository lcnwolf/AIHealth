# AIHealth

Минимальное SwiftUI-приложение для проверки чтения данных из HealthKit и отправки сводки в OpenAI.

## Возможности
- Запрашивает разрешение на чтение основных метрик HealthKit при первом запуске.
- Показывает инструкцию по включению доступа, если пользователь отказал.
- Позволяет ввести временный API-ключ OpenAI и не сохраняет его.
- По кнопке «Проверить здоровье» собирает упрощённый срез данных (сон, пульс, активность и тренировки).
- Формирует промпт по заданному шаблону и отправляет его в модель `gpt-4o-mini` через OpenAI Chat Completions API.
- Отображает ответ модели на отдельном экране.

## Запуск
1. Откройте `AIHealth.xcodeproj` в Xcode 15+ на устройстве с поддержкой HealthKit.
2. В `Signing & Capabilities` укажите свою команду разработчика и убедитесь, что включена возможность **HealthKit** (файл `AIHealth/AIHealth.entitlements` уже добавлен в проект).
3. При необходимости измените идентификатор пакета в настройках таргета (`com.example.aihealth` используется как заглушка).
4. Запустите приложение на реальном устройстве. На симуляторе HealthKit недоступен.
5. При первом запуске разрешите доступ ко сну, сердцу, активности и тренировкам.
6. Вставьте тестовый API-ключ OpenAI (например, временный ключ) и нажмите «Проверить здоровье».

## Настройка OpenAI
- Ключ запрашивается только на текущую сессию и не сохраняется.
- Запросы отправляются на `https://api.openai.com/v1/chat/completions` с моделью `gpt-4o-mini`.
- При желании можно заменить модель или эндпоинт в `OpenAIService`.

## Структура
- `AIHealth.xcodeproj/` — готовый проект Xcode c iOS-таргетом.
- `AIHealth/AIHealthApp.swift` — точка входа.
- `AIHealth/ContentView.swift` — основной экран с логикой состояния.
- `AIHealth/ResultView.swift` — отображение ответа модели.
- `AIHealth/HealthKitManager.swift` — обёртка вокруг HealthKit и сбор метрик.
- `AIHealth/HealthSnapshot.swift` — структуры данных для сериализации.
- `AIHealth/PromptBuilder.swift` — формирование промпта.
- `AIHealth/OpenAIService.swift` — отправка запроса в OpenAI.
- `AIHealth/Assets.xcassets` — минимальные ассеты приложения (иконка-заглушка и цвет акцента).

## Ассеты

Чтобы обходиться без бинарников в репозитории, иконка приложения хранится как векторный `AppIcon.svg` внутри `Assets.xcassets/AppIcon.appiconset`. Xcode автоматически растрирует его под нужные размеры при сборке. Если хотите использовать собственные PNG, замените svg или добавьте их в набор иконок — проект их подхватит.
