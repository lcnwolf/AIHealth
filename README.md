# AIHealth

Минимальное SwiftUI-приложение для проверки чтения данных из HealthKit и отправки сводки в OpenAI.

## Возможности
- Запрашивает разрешение на чтение основных метрик HealthKit при первом запуске.
- Показывает инструкцию по включению доступа, если пользователь отказал.
- Позволяет ввести временный API-ключ OpenAI и не сохраняет его.
- По кнопке «Проверить здоровье» собирает упрощённый срез данных (сон, пульс, активность и тренировки).
- Формирует промпт по заданному шаблону и отправляет его в модель `gpt-4o-mini` через OpenAI Chat Completions API.
- Отображает ответ модели на отдельном экране.

## Запуск
1. Откройте проект в Xcode 15+ на устройстве с поддержкой HealthKit.
2. В `Signing & Capabilities` включите возможность HealthKit (чтение данных).
3. Запустите приложение на реальном устройстве. На симуляторе HealthKit недоступен.
4. При первом запуске разрешите доступ ко сну, сердцу, активности и тренировкам.
5. Вставьте тестовый API-ключ OpenAI (например, временный ключ) и нажмите «Проверить здоровье».

## Настройка OpenAI
- Ключ запрашивается только на текущую сессию и не сохраняется.
- Запросы отправляются на `https://api.openai.com/v1/chat/completions` с моделью `gpt-4o-mini`.
- При желании можно заменить модель или эндпоинт в `OpenAIService`.

## Структура
- `AIHealthApp.swift` — точка входа.
- `ContentView.swift` — основной экран с логикой состояния.
- `ResultView.swift` — отображение ответа модели.
- `HealthKitManager.swift` — обёртка вокруг HealthKit и сбор метрик.
- `HealthSnapshot.swift` — структуры данных для сериализации.
- `PromptBuilder.swift` — формирование промпта.
- `OpenAIService.swift` — отправка запроса в OpenAI.
